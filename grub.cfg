#
# ### !!! WARNING - READ ME !!! ###
#
# DO NOT edit this file. This file has been generated automatically by the loader generator.
# If you were asked to use a pre-made image and asked by someone to edit this file DO NOT do it. The only
# supported method of obtaining the loader image is generating it using the loader generator provided.
#
#####################################################################################
## Redpill Multi Bootloader v0.9.0-r01
## Modify FOXBI
## 2022.04.26
#====================================================================================
## User config - Your values Change
#====================================================================================
set sn=1234SQRDD5678
set netif_num=1
set mac1=001122334455
set SataPortMap=9
set DiskIdxMap=0
set SasIdxMap=0
#====================================================================================
## USB use only
#====================================================================================
set pid=0xa4a5
set vid=0x0525
#====================================================================================
## SATA Boot Priority (default : loader (1:0), data (0:0) )
#====================================================================================
set shd=hd1
#====================================================================================
## USB Boot Priority
#====================================================================================
set uhd=hd0
#####################################################################################
## Do not Change (if you have multi netif, add args values)
#====================================================================================
set user_args="pid=$pid vid=$vid sn=$sn netif_num=$netif_num mac1=$mac1 SataPortMap=$SataPortMap DiskIdxMap=$DiskIdxMap SasIdxMap=$SasIdxMap"
eval "set user_args=\"\$user_args\""
eval "set shd=\"\$shd\""
eval "set uhd=\"\$uhd\""
#####################################################################################

terminal_output console
if serial --unit=0 --speed=115200; then
    terminal_input --append serial_com0
    terminal_output --append serial_com0
fi

set default="0"
set timeout="5"
set timeout_style="menu"

if [ -s $prefix/grubenv ]; then
    load_env --file $prefix/grubenv --skip-sig
    set has_env="1"
    if [ -n "${saved_entry}" ]; then
        set default="${saved_entry}"
    fi
else
    set has_env="0"
    echo "WARN: failed to load env. Default choice will NOT be saved!"
fi


function savedefault {
    saved_entry="${chosen}"
    save_env --file $prefix/grubenv saved_entry
}

insmod usb_keyboard
insmod part_msdos
insmod ext2
insmod fat
insmod linux
insmod gzio

set gfxmode=auto
insmod vbe
insmod vga

# UEFI
insmod efi_gop
insmod efi_uga

insmod font
if loadfont ${prefix}/unicode.pf2
then
    insmod gfxterm
    set gfxmode=auto
    set gfxpayload=keep
    terminal_output gfxterm
fi

menuentry 'RedPill DS918+ v7.1.0-42661 (SATA, Verbose)' {
	savedefault
	set root=($shd,msdos1)
	echo Loading Linux...
	linux /Model/ds918p/zImage withefi earlyprintk syno_hw_version=DS918+ console=ttyS0,115200n8 earlycon=uart8250,io,0x3f8,115200n8 synoboot_satadom=2 syno_port_thaw=1 elevator=elevator loglevel=15 HddHotplug=0 syno_hdd_detect=0 vender_format_version=2 syno_hdd_powerup_seq=1 log_buf_len=32M root=/dev/md0 $user_args
	echo Loading initramfs...
	initrd /Model/ds918p/rd.gz /Model/ds918p/custom.gz
	echo Starting kernel with SATA boot
	echo WARNING: SATA boot support on this platform is experimental!
}

menuentry 'RedPill DS920+ v7.1.0-42661 (SATA, Verbose)' {
	savedefault
	set root=($shd,msdos1)
	echo Loading Linux...
	linux /Model/ds920p/zImage earlyprintk syno_hw_version=DS920+ console=ttyS0,115200n8 synoboot2 earlycon=uart8250,io,0x3f8,115200n8 synoboot_satadom=2 HddEnableDynamicPower=1 elevator=elevator loglevel=15 intel_iommu=igfx_off vender_format_version=2 log_buf_len=32M root=/dev/md0 syno_ttyS1=serial,0x2f8 syno_ttyS0=serial,0x3f8 $user_args
	echo Loading initramfs...
	initrd /Model/ds920p/rd.gz /Model/ds920p/custom.gz
	echo Starting kernel with SATA boot
	echo WARNING: SATA boot support on this platform is experimental!
}

menuentry 'RedPill DS1621+ v7.1.0-42661 (SATA, Verbose)' {
	savedefault
	set root=($shd,msdos1)
	echo Loading Linux...
	linux /Model/ds1621p/zImage earlyprintk syno_hw_version=DS1621+ console=ttyS0,115200n8 synoboot2 earlycon=uart8250,io,0x3f8,115200n8 synoboot_satadom=2 SMBusHddDynamicPower=1 elevator=elevator loglevel=15 vender_format_version=2 log_buf_len=32M root=/dev/md0 syno_ttyS1=serial,0x2f8 syno_ttyS0=serial,0x3f8 $user_args
	echo Loading initramfs...
	initrd /Model/ds1621p/rd.gz /Model/ds1621p/custom.gz
	echo Starting kernel with SATA boot
	echo WARNING: SATA boot support on this platform is experimental!
}

menuentry 'RedPill DS3615xs v7.1.0-42661 (SATA, Verbose)' {
	savedefault
	set root=($shd,msdos1)
	echo Loading Linux...
	linux /Model/ds3615xs/zImage withefi earlyprintk syno_hw_version=DS3615xs console=ttyS0,115200n8 earlycon=uart8250,io,0x3f8,115200n8 synoboot_satadom=1 syno_port_thaw=1 elevator=elevator loglevel=15 HddHotplug=0 syno_hdd_detect=0 vender_format_version=2 syno_hdd_powerup_seq=0 log_buf_len=32M root=/dev/md0 $user_args
	echo Loading initramfs...
	initrd /Model/ds3615xs/rd.gz /Model/ds3615xs/custom.gz
	echo Starting kernel with SATA boot
}

menuentry 'RedPill DS3617xs v7.1-42661 Beta (SATA, Verbose)' {
	savedefault
	set root=($shd,msdos1)
	echo Loading Linux...
	linux /Model/ds3617xs/zImage withefi earlyprintk syno_hw_version=DS3617xs console=ttyS0,115200n8 earlycon=uart8250,io,0x3f8,115200n8 synoboot_satadom=1 syno_port_thaw=1 elevator=elevator loglevel=15 HddHotplug=0 syno_hdd_detect=0 vender_format_version=2 syno_hdd_powerup_seq=0 log_buf_len=32M root=/dev/md0 $user_args 
	echo Loading initramfs...
	initrd /Model/ds3617xs/rd.gz /Model/ds3617xs/custom.gz
	echo Starting kernel with SATA boot
}

menuentry 'RedPill DS3622xs v7.1.0-42661 Beta (SATA, Verbose)' {
	savedefault
	set root=($shd,msdos1)
	echo Loading Linux...
	linux /Model/ds3622xsp/zImage withefi earlyprintk syno_hw_version=DS3622xs+ console=ttyS0,115200n8 earlycon=uart8250,io,0x3f8,115200n8 synoboot_satadom=1 syno_port_thaw=1 elevator=elevator loglevel=15 HddHotplug=0 syno_hdd_detect=0 vender_format_version=2 syno_hdd_powerup_seq=0 log_buf_len=32M root=/dev/md0 $user_args 
	echo Loading initramfs...
	initrd /Model/ds3622xsp/rd.gz /Model/ds3622xsp/custom.gz
	echo Starting kernel with SATA boot
}

menuentry 'RedPill DVA3221 v7.1.0-42661 Beta (SATA, Verbose)' {
	savedefault
	set root=($shd,msdos1)
	echo Loading Linux...
	linux /Model/dva3221/zImage withefi earlyprintk syno_hw_version=DVA3221 console=ttyS0,115200n8 earlycon=uart8250,io,0x3f8,115200n8 synoboot_satadom=2 syno_port_thaw=1 elevator=elevator loglevel=15 HddHotplug=0 syno_hdd_detect=0 vender_format_version=2 syno_hdd_powerup_seq=0 log_buf_len=32M root=/dev/md0 $user_args 
	echo Loading initramfs...
	initrd /Model/dva3221/rd.gz /Model/dva3221/custom.gz
	echo Starting kernel with SATA boot
}

submenu 'USB Redpill Bootloader' {
	menuentry 'RedPill DS918+ v7.1.0-42661 (USB, Verbose)' {
		savedefault
		set root=($uhd,msdos1)
		echo Loading Linux...
		linux /Model/ds918p/zImage withefi earlyprintk syno_hw_version=DS918+ console=ttyS0,115200n8 earlycon=uart8250,io,0x3f8,115200n8 syno_port_thaw=1 elevator=elevator loglevel=15 HddHotplug=0 syno_hdd_detect=0 vender_format_version=2 syno_hdd_powerup_seq=1 log_buf_len=32M root=/dev/md0 $user_args 
		echo Loading initramfs...
		initrd /Model/ds918p/rd.gz /Model/ds918p/custom.gz
		echo Starting kernel with USB boot
	}

	menuentry 'RedPill DS920+ v7.1.0-42661 (USB, Verbose)' {
		savedefault
		set root=($uhd,msdos1)
		echo Loading Linux...
		linux /Model/ds920p/zImage earlyprintk syno_hw_version=DS920+ console=ttyS0,115200n8 synoboot2 earlycon=uart8250,io,0x3f8,115200n8 HddEnableDynamicPower=1 elevator=elevator loglevel=15 intel_iommu=igfx_off vender_format_version=2 log_buf_len=32M root=/dev/md0 syno_ttyS1=serial,0x2f8 syno_ttyS0=serial,0x3f8 $user_args 
		echo Loading initramfs...
		initrd /Model/ds920p/rd.gz /Model/ds920p/custom.gz
		echo Starting kernel with USB boot
	}

	menuentry 'RedPill DS1621+ v7.1.0-42661 (USB, Verbose)' {
		savedefault
		set root=($uhd,msdos1)
		echo Loading Linux...
		linux /Model/ds1621p/zImage earlyprintk syno_hw_version=DS1621+ console=ttyS0,115200n8 synoboot2 earlycon=uart8250,io,0x3f8,115200n8 SMBusHddDynamicPower=1 elevator=elevator loglevel=15 vender_format_version=2 log_buf_len=32M root=/dev/md0 syno_ttyS1=serial,0x2f8 syno_ttyS0=serial,0x3f8 $user_args 
		echo Loading initramfs...
		initrd /Model/ds1621p/rd.gz /Model/ds1621p/custom.gz
		echo Starting kernel with USB boot
	}

	menuentry 'RedPill DS3615xs v7.1.0-42661 (USB, Verbose)' {
		savedefault
		set root=($uhd,msdos1)
		echo Loading Linux...
		linux /Model/ds3615xs/zImage withefi earlyprintk syno_hw_version=DS3615xs console=ttyS0,115200n8 earlycon=uart8250,io,0x3f8,115200n8 syno_port_thaw=1 elevator=elevator loglevel=15 HddHotplug=0 syno_hdd_detect=0 vender_format_version=2 syno_hdd_powerup_seq=0 log_buf_len=32M root=/dev/md0 $user_args  
		echo Loading initramfs...
		initrd /Model/ds3615xs/rd.gz /Model/ds3615xs/custom.gz
		echo Starting kernel with USB boot
	}

	menuentry 'RedPill DS3617xs v7.1-42661 Beta (USB, Verbose)' {
		savedefault
		set root=($uhd,msdos1)
		echo Loading Linux...
		linux /Model/ds3617xs/zImage withefi earlyprintk syno_hw_version=DS3617xs console=ttyS0,115200n8 earlycon=uart8250,io,0x3f8,115200n8 syno_port_thaw=1 elevator=elevator loglevel=15 HddHotplug=0 syno_hdd_detect=0 vender_format_version=2 syno_hdd_powerup_seq=0 log_buf_len=32M root=/dev/md0 $user_args  
		echo Loading initramfs...
		initrd /Model/ds3617xs/rd.gz /Model/ds3617xs/custom.gz
		echo Starting kernel with USB boot
	}

	menuentry 'RedPill DS3622xs v7.1.0-42661 Beta (USB, Verbose)' {
		savedefault
		set root=($uhd,msdos1)
		echo Loading Linux...
		linux /Model/ds3622xsp/zImage withefi earlyprintk syno_hw_version=DS3622xs+ console=ttyS0,115200n8 earlycon=uart8250,io,0x3f8,115200n8 syno_port_thaw=1 elevator=elevator loglevel=15 HddHotplug=0 syno_hdd_detect=0 vender_format_version=2 syno_hdd_powerup_seq=0 log_buf_len=32M root=/dev/md0 $user_args  
		echo Loading initramfs...
		initrd /Model/ds3622xsp/rd.gz /Model/ds3622xsp/custom.gz
		echo Starting kernel with USB boot
	}

	menuentry 'RedPill DVA3221 v7.1.0-42661 Beta (USB, Verbose)' {
		savedefault
		set root=($uhd,msdos1)
		echo Loading Linux...
		linux /Model/dva3221/zImage withefi earlyprintk syno_hw_version=DVA3221 console=ttyS0,115200n8 earlycon=uart8250,io,0x3f8,115200n8 syno_port_thaw=1 elevator=elevator loglevel=15 HddHotplug=0 syno_hdd_detect=0 vender_format_version=2 syno_hdd_powerup_seq=0 log_buf_len=32M root=/dev/md0 $user_args  
		echo Loading initramfs...
		initrd /Model/dva3221/rd.gz /Model/dva3221/custom.gz
		echo Starting kernel with USB boot
	}
}